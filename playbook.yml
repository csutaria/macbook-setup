#! /usr/bin/env ansible-playbook -i hosts

---
- hosts: all
  vars:
    homebrew_packages:
      - zsh
      - tmux
      - neovim
      - git
      - ripgrep
      - ansible
    homebrew_cask_apps:
      - google-chrome
      - iterm2
      - insync
      - vmware-horizon-client
      - virtualbox
      - vagrant
      - spotify
      - pocket-casts
      - sublime-text
      - kindle
      - microsoft-office
  tasks:
    - name: Install homebrew packages
      homebrew:
        name: '{{ item }}'
        state: latest
      loop: '{{ homebrew_packages }}'
    - name: Install homebrew apps
      homebrew_cask:
        name: '{{ item }}'
        state: installed
      loop: '{{ homebrew_cask_apps }}'
    - name: brew cleanup
      shell: brew cleanup
    - name: Clear package cache
      shell: rm -fr $(brew --cache)
    - name: Clear Caskroom directory
      shell: rm -fr /usr/local/Caskroom

